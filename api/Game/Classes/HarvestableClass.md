---
title: HarvestableClass
description: Класс, который создается для каждого собираемого объекта в игре.
published: false
date: 2023-06-24T12:13:37.859Z
tags: class, harvestable, harvestableclass, класс
editor: markdown
dateCreated: 2023-06-24T12:03:31.102Z
---

# HarvestableClass
Класс, который создается для каждого [собираемого](TODO:link_to_type) объекта в игре.

Дерево или растение, которое можно собрать, является типичным примером пригодного для сбора урожая.

Может получать события, отправленные с помощью [sm.event.sendToHarvestable](TODO:link_to_func).
## Переменные
|Тип|Имя|Описание|
|---|---|--------|
|[Harvestable](TODO:link_to_type)|harvestable|[Собираемый](TODO:link_to_type) игровой объект, принадлежащий этому экземпляру класса.|
|[Network](TODO:link_to_type)|network|[Сетевой](TODO:link_to_type) объект, который может использоваться для отправки сообщений между клиентом и сервером.|
|[Storage](TODO:link_to_type)|storage|(Только на стороне сервера.) Объект [хранения](TODO:link_to_type), который может быть использован для хранения данных при следующей загрузке этого объекта после выгрузки.|
|any|data|Информация переданная из таблицы data в json.|
{.dense}
## Константы
- [poseWeightCount](#poseWeightCount)
## Общие события
- [server_onCreate](#server_onCreate)
- [client_onCreate](#client_onCreate)
- [server_onDestroy](#server_onDestroy)
- [client_onDestroy](#client_onDestroy)
- [server_onRefresh](#server_onRefresh)
- [client_onRefresh](#client_onRefresh)
- [server_onFixedUpdate](#server_onFixedUpdate)
- [client_onFixedUpdate](#client_onFixedUpdate)
- [client_onUpdate](#client_onUpdate)
- [client_onClientDataUpdate](#client_onClientDataUpdate)
## События класса
- [](#)
- [](#)
- [](#)
- [](#)
- [](#)
- [](#)
- [](#)
- [](#)
- [](#)
- [](#)
- [](#)
- [](#)
- [](#)
- [](#)
- [](#)
## События
<h3 id="server_onCreate">server_onCreate(self) <i>serverEventCallback</i></h3>

Вызывается при создании скриптового объекта. Это происходит, когда ставится или загружается из файла сохранения новая детал.

Аргументы:
| Тип | Имя|     Описание    |
|-----|----|-----------------|
|table|self|Экземпляр класса.|
{.dense}
<h3 id="client_onCreate">client_onCreate(self) <i>clientEventCallback</i></h3>

Вызывается при создании скриптового объекта. Это происходит, когда ставится или загружается из файла сохранения новая детал.

Аргументы:
| Тип | Имя|     Описание    |
|-----|----|-----------------|
|table|self|Экземпляр класса.|
{.dense}
<h3 id="server_onDestroy">server_onDestroy(self) <i>serverEventCallback</i></h3>

Вызывается, когда интерактивная деталь уничтожается.

Аргументы:
| Тип | Имя|     Описание    |
|-----|----|-----------------|
|table|self|Экземпляр класса.|
{.dense}
<h3 id="client_onDestroy">client_onDestroy(self) <i>clientEventCallback</i></h3>

Вызывается, когда интерактивная деталь уничтожается.

Аргументы:
| Тип | Имя|     Описание    |
|-----|----|-----------------|
|table|self|Экземпляр класса.|
{.dense}
<h3 id="server_onRefresh">server_onRefresh(self) <i>serverEventCallback</i></h3>

Вызывается, если Lua-скрипт, прикрепленный к интерактивной детали, изменяется во время работы игры.

> Для этого события требуется, чтобы Scrap Mechanic был запущен с флагом '-dev'. Это позволит скриптам автоматически обновляться при внесении изменений.
{.is-info}

Аргументы:
| Тип | Имя|     Описание    |
|-----|----|-----------------|
|table|self|Экземпляр класса.|
{.dense}
<h3 id="client_onRefresh">client_onRefresh(self) <i>clientEventCallback</i></h3>

Вызывается, если Lua-скрипт, прикрепленный к интерактивной детали, изменяется во время работы игры.

> Для этого события требуется, чтобы Scrap Mechanic был запущен с флагом '-dev'. Это позволит скриптам автоматически обновляться при внесении изменений.
{.is-info}

Аргументы:
| Тип | Имя|     Описание    |
|-----|----|-----------------|
|table|self|Экземпляр класса.|
{.dense}
<h3 id="server_onFixedUpdate">server_onFixedUpdate(self, timeStep) <i>serverEventCallback</i></h3>

Вызывается каждый игровой тик – в одной секунде 40 тиков. Если частота кадров ниже 40 кадров в секунду, это событие может быть вызвано дважды.

Во время фиксированного обновления, обновляются физика и логика взаимодействия между интерактивными объектами.

Аргументы:
| Тип  |   Имя  |                            Описание                             |
|------|--------|-----------------------------------------------------------------|
|table |  self  |Экземпляр класса.                                                |
|number|timeStep|Период времени в тике. (Всегда равно 0.025, или же 1/40 секунды.)|
{.dense}
<h3 id="client_onFixedUpdate">client_onFixedUpdate(self, timeStep) <i>clientEventCallback</i></h3>

Вызывается каждый игровой тик – в одной секунде 40 тиков. Если частота кадров ниже 40 кадров в секунду, это событие может быть вызвано дважды.

Во время фиксированного обновления, обновляются физика и логика взаимодействия между интерактивными объектами.

Аргументы:
| Тип  |   Имя  |                            Описание                             |
|------|--------|-----------------------------------------------------------------|
|table |  self  |Экземпляр класса.                                                |
|number|timeStep|Период времени в тике. (Всегда равно 0.025, или же 1/40 секунды.)|
{.dense}
<h3 id="client_onUpdate">client_onUpdate(self, deltaTime) <i>clientEventCallback</i></h3>

Вызывается каждый кадр.
Во время обновления кадра обновляются графика, анимация и эффекты.

> Из-за того, как часто вызывается это событие, количество выполняемого здесь кода сильно влияет на частоту кадров игры.
Для любого кода, не связанного с графикой, рассмотрите возможность использования [client_onFixedUpdate](#client_onfixedupdateself-timestep-clienteventcallback) вместо этого.
Если событие не используется, рассмотрите возможность удаления его из сценария. (Обратные вызовы событий, которые не реализованы, вызываться не будут.)
{.is-warning}

Аргументы:
|  Тип |   Имя   |                    Описание                   |
|------|---------|-----------------------------------------------|
|table |   self  |Экземпляр класса.                              |
|number|deltaTime|Разность во времени с момента последнего кадра.|
<h3 id="client_onClientDataUpdate">client_onClientDataUpdate(self, data, channel) <i>clientEventCallback</i></h3>

Вызывается, когда клиент получает новые обновления клиентских данных с сервера, установленных с помощью [Network.setClientData](TODO:link_to_func).

Данные, установленные таким образом, являются постоянными, и последние данные будут автоматически отправляться новым клиентам.

Данные поступят после client_onCreate в течение того же тика.

Канал 1 будет получен раньше канала 2, если оба будут обновлены.

Аргументы:
|  Тип  |  Имя  |                                      Описание                                     |
|-------|-------|-----------------------------------------------------------------------------------|
| table |  self |Экземпляр класса.                                                                  |
|  any  |  data |Любой объект Lua, отправленный с помощью [Network.setClientData](TODO:link_to_func)|
|integer|channel|Клиентский канал передачи данных, 1 или 2. (по умолчанию: 1)                       |
{.dense}